{
  "hash": "10c474ea3a5d3d33da98bef2b657b6ae",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"CS: Example\"\noutput: \n  html: \n    highlight: pygments\n    preview-links: auto\n---\n\n\n### Load packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(OCSdata)\nlibrary(tidyverse)\nlibrary(here)\nlibrary(pdftools)\nlibrary(tesseract)\nlibrary(magick)\nlibrary(knitr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'knitr' was built under R version 4.3.3\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(Kendall)\nlibrary(broom)\n```\n:::\n\n\n::: callout-tip\n### Prof Note\n\nI would recommend packages be imported after the introduction, but this is very specific and not something anyone would lose credit for.\n:::\n\n## Introduction\n\nIn this case study, we seek to analyze the youth disconnection among minority groups within the United States. The disconnected youth are the young people who are between the ages of 16 and 24 who are neither working nor in school. Following the aftermath of the Great Recession in 2008, we witnessed a peak youth disconnection rate of 14.7 percent in 2010 which has since been trending downwards to as low as a youth disconnection rate of 11.5 percent in 2017. While analyzing racial and ethnic groups is imperative for viewing any evident disparities, we also intend on analyzing how gender may play a role in affecting the rates of disconnection. Seeing as how we can already see existing disparities between genders within the workforce, we also want to see to what extent, if at all, gender plays a role in youth disconnection among groups.\n\nThis specific period of young adulthood is one of the most critical in developing the necessary skills and capabilities required of them to be successful in adulthood and their professional careers as youth disconnection during this period stunts development and limits their potential. Measure of America, a nonpartisan project of the nonprofit Social Science Research, claims that \"people who experience a period of disconnection as young adults go on to earn less and are less likely to be employed, own a home, or report good health by the time they reach their thirties‚Äù. Understanding how these trends among groups arise may be critical for finding solutions to preventing youth disconnection, and analyzing what groups may need more resources in order to prevent further prevent youth disconnection.\n\n::: callout-tip\n### Prof Note\n\nThis introduction is missing citations! Statements that are not your own original thoughts must be cited. See Effective Communication lecture for possible ways to cite. We don't care what format you use. We do care that you cite others' work. Also, definitely feel free to find information on the topic beyond what was presented in class.\n:::\n\n## Questions\n\n1)  How have youth disconnection rates in American youth changed since 2008?\n2)  In particular, how has this changed for different gender and ethnic groups? Are any groups particularly disconnected?\n3)  Does removing 2008 (pre-Great Recession time period) data points change our answer?\n\n::: callout-tip\n### Prof Note\n\nThe third question here was their extension. Note that this is an ok extension all things considered. But, explaining the why this is their focus and giving necessary background in the introduction would have been great.\n:::\n\n## The Data\n\nThe data set that we will be using for our case study is provided by two reports from the Measure of America project related to youth disconnect. The data provided will be in the form of images.\n\n### Data Import\n\nIn order to begin our analysis, we imported our raw data from the `OCSdata` library on youth disconnection.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Data is imported so I get overwrite error when not commented\n# Download raw data files\n# load_raw_data(\"ocs-bp-youth-disconnection\", outpath = '.')\n```\n:::\n\n\n::: callout-tip\n### Prof Note\n\nReminder that you can control chunk behavior for each chunk within the curly braces. This also applies for the warnings that are displayed later on. Best to suppress those in final HTML.\n:::\n\nSince the raw data is in images, we need to convert to a usable R data set. We started with the major racial ethnic groups.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Import data for major racial/ethnic groups\nmajor_racial_ethnic_groups <- magick::image_read(\"data/Major_ethnic_groups_screenshot.png\")\nmajor_groups <- magick::image_ocr(major_racial_ethnic_groups)\n```\n:::\n\n\nFor Asian subgroups, we had to import the raw data for 2017 and 2018.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Import data for Asian subgroups\n\n# 2017 data\nasian_sub_2017 <- image_read(\"data/asian_subgroups_2017.png\")\nasian_sub_2017_A <- image_read(\"data/asian_sub_2017_A.png\")\nasian_sub_2017_B <- image_read(\"data/asian_sub_2017_B.png\")\nasian_sub_2017_C <- image_read(\"data/asian_sub_2017_C.png\")\nasian_sub_2017 <- image_ocr(asian_sub_2017)\nasian_sub_2017_A <- image_ocr(asian_sub_2017_A)\nasian_sub_2017_B <- image_ocr(asian_sub_2017_B)\nasian_sub_2017_C <- image_ocr(asian_sub_2017_C)\n\n# 2018 data\nasian_sub_2018_A <- image_read(\"data/asian_sub_2018_A.png\")\nasian_sub_2018_A <- image_ocr(asian_sub_2018_A)\nasian_sub_2018_B <- image_read(\"data/asian_sub_2018_B.png\")\nasian_sub_2018_B <- image_ocr(asian_sub_2018_B)\n```\n:::\n\n\nFor Latinx subgroups, we also imported 2017 and 2018 data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Import data for Latinx subgroups\n\n# 2017 data\nlatinx_imageA <- image_read(\"data/latinx_sub_2017_A.png\")\nlatinx_imageB <- image_read(\"data/latinx_sub_2017_B.png\")\nlatinx_imageC <- image_read(\"data/latinx_sub_2017_C.png\")\nlatinx_sub_2017_A <- image_ocr(latinx_imageA)\nlatinx_sub_2017_B <- image_ocr(latinx_imageB)\nlatinx_sub_2017_C <- image_ocr(latinx_imageC)\n\n# 2018 data\nlatinx_sub_2018 <- image_read(\"data/latinx_subgroups_2018.png\")\nlatinx_sub_2018 <- image_ocr(latinx_sub_2018)\n```\n:::\n\n\nOnce the data import is complete, we saved our data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Save data\nsave(\n  major_groups,\n  asian_sub_2017,\n  asian_sub_2017_A,\n  asian_sub_2017_B,\n  asian_sub_2017_C,\n  latinx_sub_2017_A,\n  latinx_sub_2017_B,\n  latinx_sub_2017_C,\n  asian_sub_2018_A,\n  asian_sub_2018_B,\n  latinx_sub_2018,\n  file = \"data/imported_data.rda\")\n```\n:::\n\n\n### Data Wrangling\n\n::: callout-tip\n### Prof Note\n\nJust a heads up this case study required A LOT more wrangling than your case study will. So, when your code is simpler/shorter for our first case study, that's expected.\n:::\n\nNow that we have our data properly imported, we need to wrangle our data in R so we can begin our analysis.\n\n::: callout-tip\n### Prof Note\n\nThere is text to guide the viewer, clear code, and code comments as needed. I like this.\n:::\n\n#### Major Group Data\n\nTo begin our data wrangling, we took the imported data that is in a single string and separated the data by new line characters and transformed it into a table.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Separates string by new line and transforms into a table\nmajor_groups <- major_groups |>\n  stringr::str_split(pattern = \"\\n\") |>\n  unlist() |> \n  tibble::as_tibble()\n```\n:::\n\n\nNow that our data has rows, we created columns `Group` and `Year` and assigned the corresponding values according to the data as well as normalizing the capitalization throughout the data set.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Separate into columns Group and Year\nmajor_groups <- \n  major_groups |>\n  tidyr::separate(col = value, \n                  into = c(\"Group\", \"Years\"), # Set column names\n                  sep = \"(?<=[[:alpha:]])\\\\s(?=[0-9])\")  # Separate after letter string; beginning numerics\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Expected 2 pieces. Missing pieces filled with `NA` in 1 rows [19].\n```\n\n\n:::\n\n```{.r .cell-code}\n# Make capitalization format the same\nmajor_groups <- major_groups |> \n  mutate(Group = stringr::str_to_title(Group))\n```\n:::\n\n\n::: callout-tip\n### Prof Note\n\nBy displaying these warnings in your output, it makes your report harder to read. This can be controlled in the chunk settings `{r warning=FALSE}` for a single chunk or for the entire document using `knitr::opts_chunk$set(warning=FALSE)`\n:::\n\nWe have our data in two columns but need to separate our `Years` column into each individual year. We thus separated the column by every space character, assigned appropriate years for its corresponding values, and made the data values numeric.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Separate `Years` into columns by individual years\nmajor_groups <- major_groups |> \n  tidyr::separate(col = Years, \n                  into = c(\"2008\", \"2010\", \"2012\", \"2014\", \"2016\", \"2017\"),  # Set column names\n                  sep = \" \") # Separate by spaces\n\n# Remove empty rows\nmajor_groups <- major_groups |> \n  tidyr::drop_na()\n \n# Make data numeric\nmajor_groups <- major_groups |>\n  mutate(\n    across(.cols = -Group,\n           ~ str_remove(string = ., pattern = \"\\\\.\")),  # Remove decimal points from string\n    across(.cols = -Group, as.numeric),  # Convert to numeric\n    across(.cols = -Group, ~ . * 0.1)   # Add decimal point back\n  )\n```\n:::\n\n\nWe have a lot of information in our `Group` column, so we separated that information and created two new columns, `Race_Ethnicity` and `Gender`, to make it easier to analyze our data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create Race_Ethnicity column\nmajor_groups  <- major_groups |>\n  # First, create entries for `All_races`\n  mutate(Race_Ethnicity = dplyr::recode(Group, \"United States\" = \"All_races\",\n                                        \"Female\" = \"All_races\",\n                                        \"Male\" = \"All_races\"),\n  # Second, create entries for all other races by importing data from group column and removing gender  \n         Race_Ethnicity = str_remove(string = Race_Ethnicity,\n                                     pattern = \"Female|Male\"))\n# Create Gender column\nmajor_groups  <- major_groups |>\n  # Extract gender from `Group` column\n  mutate(Gender = str_extract(string = Group, \n                              pattern = \"Female|Male\")) |>\n  # Assign `All' if gender was not in `Group`\n  mutate(Gender = replace_na(Gender, replace = \"All\"))\n```\n:::\n\n\nNow that we have all of our data, we moved the columns containing years into rows and added a new column `Percent` to log the value contained in the, now former, year column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Puts years in rows instead of columns with percent values\nmajor_groups_long <- major_groups |>\n  tidyr::pivot_longer(cols = contains(\"20\"), # any column containing 20\n                      names_to = \"Year\", # Assigns column for year\n                      values_to = \"Percent\", # Assigns column for percent\n                      names_prefix = \"Perc_\") |>\n  dplyr::mutate(Year = as.numeric(Year))\n```\n:::\n\n\n#### Subgroup Data\n\n##### Data Wrangling Functions\n\nWe wrangled the major group data but now have to wrangle the subgroup data, which is a little more complicated. We first created a `make_rows` function to take the imported raw data and convert it into a table with rows separated by new line characters.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create function to separate string into rows\nmake_rows <- function(text){\n  text |>\n  str_split(\"\\n\") |>\n  unlist() |>\n  as_tibble()\n}\n```\n:::\n\n\nWe also created two functions `clean_table` and `clean_table_2018` to clean our subgroup data just like the major group data -- separating `Group` and `Years` columns, converting data to numeric, and creating `Race_Ethnicity` and `Gender` columns.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create function to clean 2017 subgroup data \nclean_table <- function(table){\n  table |>\n    separate(col = value,\n             into = c(\"Group\", \"Percentage\"), # Create column names\n             sep =  \"(?<=[[:alpha:]])\\\\s(?=[0-9])\") |> # Split into columns after string of letters\n    drop_na() |> # Remove NA rows\n    # Make percentage data numeric\n    mutate(Group = str_to_title(Group)) |>\n    mutate(Percentage = str_remove(string = Percentage,\n                                   pattern = \"\\\\.\")) |> # Remove decimal points from string\n    separate(Percentage, c(\"Percent\"), sep = \" \") |> # Separate by space\n    mutate(Percent = as.numeric(Percent)) |> # Convert to numeric\n    mutate(Percent = Percent * 0.1) |> # Add back decimal point\n    # Create Race_Ethnicity column\n    mutate(Race_Ethnicity = recode(Group, \n                                   # Create entries for All_races\n                                   \"United States\" = \"All_races\",\n                                   \"Female\" = \"All_races\",\n                                   \"Male\" = \"All_races\")) |>\n    # Create entries for all other races by importing data from group column and removing gender  \n    mutate(Race_Ethnicity = str_remove(string = Race_Ethnicity, \n                                       pattern = \" Female| Male\")) |> \n    # Create Gender column\n    mutate(Gender = str_extract(string = Group,\n                                pattern =\"Female|Male\")) |> # Extract gender from `Group` column\n    mutate(Gender = replace_na(Gender, replace = \"All\"))  # Assign `All' if gender was not in `Group`\n}\n\n# Create function to clean 2018 subgroup data \nclean_table_2018 <- function(table){\n  table |>\n    separate(col = value, \n             into = c(\"Group\", \"Percent\"), # Create column names\n             sep =  \"(?<=[[:alpha:]])\\\\s:\\\\s|\\\\s(?=[0-9])\") |>  # Split into columns after colon\n    mutate(Group = str_remove(string = Group, \n                            pattern = \":\")) |> # Remove colon\n    drop_na() |> # Remove NA rows\n    # Make percentage data numeric\n    mutate(Group = str_to_title(string = Group)) |> \n    mutate(Percent = str_remove(string = Percent, \n                               pattern = \"\\\\.\")) |> # Remove decimal points from string\n    mutate(Percent = as.numeric(Percent)) |> # Convert to numeric\n    mutate(Percent = Percent * 0.1) |> # Add back decimal point\n    # Create Race_Ethnicity column\n    mutate(Race_Ethnicity = str_replace(string = Group,\n                                        pattern = \"Men|Women\", \n                                        replacement = \"missing\")) |> # Replace gender with missing\n    mutate(Race_Ethnicity = na_if(Race_Ethnicity, \"missing\")) |> # Make missing values NA\n    fill(Race_Ethnicity, .direction = \"down\") |> # Fill Race/Ethnicity in missing fields\n    # Create Gender column\n    mutate(Gender = str_extract(string = Group, \n                                pattern = \"Men|Women\")) |> # Extract gender from `Group` column\n    mutate(Gender = replace_na(Gender, replace = \"All\")) # Assign `All' if gender was not in `Group`\n}\n```\n:::\n\n\n##### Asian Subgroup Data\n\nWe ran our `make_rows` function on our raw data and combined the initially wrangled 2017 data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Asian subgroup data\n# 2017 data\n# Apply make_rows function to subgroup data\nasian_sub_2017 <- make_rows(asian_sub_2017)\nasian_sub_2017_A <- make_rows(asian_sub_2017_A)\nasian_sub_2017_B <- make_rows(asian_sub_2017_B)\nasian_sub_2017_C <- make_rows(asian_sub_2017_C)\n\n# Combine data\nasian_sub_2017 <- bind_rows(asian_sub_2017_A, \n                            asian_sub_2017_B,\n                            asian_sub_2017_C)\n```\n:::\n\n\nSimilarly, we applied `make_rows` to 2018 data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 2018 data\n# Combine data\nasian_sub_2018 <- str_c(asian_sub_2018_A, asian_sub_2018_B)\n\n# Apply make_rows function\nasian_sub_2018 <- make_rows(asian_sub_2018)\n```\n:::\n\n\nWe next cleaned both the 2017 and 2018 data using our `clean_table` and `clean_table_2018` functions.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Apply clean table function to both years data\nasian_sub_2017 <- clean_table(asian_sub_2017)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Expected 2 pieces. Missing pieces filled with `NA` in 3 rows [17, 22,\n28].\n```\n\n\n:::\n\n```{.r .cell-code}\nasian_sub_2018 <- clean_table_2018(asian_sub_2018)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Expected 2 pieces. Missing pieces filled with `NA` in 6 rows [4, 8, 15, 19, 21,\n23].\n```\n\n\n:::\n:::\n\n\nThe imported data was missing part of the data, so we manually added it back in as well as created a `Year` column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Add missing data\nasian_sub_2018 <- asian_sub_2018 |>\n  add_row(Group = \"Asian\", Percent = 6.2,\n          Race_Ethnicity = \"Asian\", Gender = \"All\") |>\n  add_row(Group = \"Asian\", Percent = 6.4,\n          Race_Ethnicity = \"Asian\", Gender = \"Men\") |>\n  add_row(Group = \"Asian\", Percent = 6.1,\n          Race_Ethnicity = \"Asian\", Gender = \"Women\")\n\n# Add years to data\nasian_sub_2017 <- asian_sub_2017 |>\n  mutate(Year = 2017)\nasian_sub_2018 <- asian_sub_2018 |>\n  mutate(Year = 2018)\n```\n:::\n\n\nSince the naming convention for males and females different across the 2017 and 2018 data, we standardized the `Gender` column to only contain `Male` and `Female` entries and then combined the data into one data set, and once again moved the years into rows and added a `Percent` column, just like our major group data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Make Male/Female the values for gender across both datasets\nasian_sub_2018 <- asian_sub_2018 |> \n  mutate(across(.cols = c(Gender, Group),\n               ~ str_replace(string = ., \n                             pattern = \"Men\", \n                             replacement = \"Male\")),\n         across(.cols = c(Gender, Group),\n               ~ str_replace(string = ., \n                             pattern = \"Women\", \n                             replacement = \"Female\")))\n\n# Combine 2017 and 2018 data\nasian_subgroups <- bind_rows(asian_sub_2017, asian_sub_2018)\n\n# Add missing categories\nasian_subgroups <- asian_subgroups |> \n  select(-Group) |>\n  pivot_wider(names_from = Year, \n              values_from = Percent) |>\n  pivot_longer(cols = -c(Race_Ethnicity, Gender),\n               names_to = \"Year\",\n               values_to= \"Percent\")\n```\n:::\n\n\n##### Latinx Subgroup Data\n\nTo wrangle our Latinx subgroup data, we followed the same steps as our Asian subgroup data -- applying `make_rows`, `clean_table`, and `clean_table_2018` functions, standardizing the `Gender` naming convention, combining 2017 and 2018 data, and moving the years into rows while adding a `Percent` column. For the Latinx data, we also appropriately labeled the Puerto Rican, Dominican, Cuban groups and cleaned the names for Latino/Latina group.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Latinx subgroup data\n# 2017 data\n# Combine data\nlatinx_sub_2017 <- stringr::str_c(latinx_sub_2017_A,\n                                  latinx_sub_2017_B, \n                                  latinx_sub_2017_C)\n\n# Fix typo\nlatinx_sub_2017 <- latinx_sub_2017 |>\n  str_replace(pattern = \"DR, Cuban Female 15.7\\nPR\", # Identify typo\n              replacement = \"DR, Cuban Male 15.7\\nPR\") # Replace gender\n\n# Apply functions to Latinx data\nlatinx_sub_2017 <- make_rows(latinx_sub_2017)\nlatinx_sub_2017 <- clean_table(table = latinx_sub_2017)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Expected 2 pieces. Missing pieces filled with `NA` in 1 rows [19].\n```\n\n\n:::\n\n```{.r .cell-code}\n# 2018 data\n# Clean the data string\nlatinx_sub_2018 <- str_replace_all(string = latinx_sub_2018, \n                                  pattern = \"\\\\s:\\n{2}|\\n{2}\", #remove two newline characters\n                                  replacement = \" \")\n\n# Apply make_rows function\nlatinx_sub_2018 <- make_rows(latinx_sub_2018)\n\n# Apply clean table function\nlatinx_sub_2018 <- clean_table_2018(latinx_sub_2018)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Expected 2 pieces. Missing pieces filled with `NA` in 1 rows [12].\n```\n\n\n:::\n\n```{.r .cell-code}\n# Create function to fix naming issues\nfix_latinx_naming <- function(table){\n  table |>\n    # Appropriately label Puerto Rican, Dominican, Cuban group\n  mutate(Group = str_replace(string = Group,\n                             pattern = \"Pr, Dr, Cuban\",\n                             replacement = \"Puerto Rican, Dominican, Cuban\"),\n          Race_Ethnicity = str_replace(string = Race_Ethnicity,\n                                       pattern = \"Pr, Dr, Cuban\",\n                                       replacement = \"Puerto Rican, Dominican, Cuban\"))\n}\n\n# Apply function to both data sets\nlatinx_sub_2017 <- fix_latinx_naming(latinx_sub_2017)\nlatinx_sub_2018 <- fix_latinx_naming(latinx_sub_2018)\n\n# Add missing data\nlatinx_sub_2018 <- latinx_sub_2018 |>\n  add_row(Group = \"Latinx\", Percent = 12.8,\n          Race_Ethnicity = \"Latinx\", Gender = \"All\") |>\n  add_row(Group = \"Latinx\", Percent = 12.3,\n          Race_Ethnicity = \"Latinx\", Gender = \"Men\") |>\n  add_row(Group = \"Latinx\", Percent = 13.3,\n          Race_Ethnicity = \"Latinx\", Gender = \"Women\")\n\n# Make Male/Female the values for gender across both datasets\nlatinx_sub_2018 <- latinx_sub_2018 |>\n  mutate(across(.cols = c(Gender, Group),\n                ~ str_replace(string = ., pattern = \"Men\", replacement = \"Male\")),\n         across(.cols = c(Gender, Group),\n                ~ str_replace(string = ., pattern = \"Women\", replacement = \"Female\")))\n\n# Add years to data\nlatinx_sub_2017 <- latinx_sub_2017 |>\n  mutate(Year = 2017)\nlatinx_sub_2018 <- latinx_sub_2018 |>\n  mutate(Year = 2018)\n\n# Combine 2017 and 2018 data\nlatinx_subgroups <- bind_rows(latinx_sub_2017, latinx_sub_2018)\n\n# Add missing categories\nlatinx_subgroups <- latinx_subgroups |>\n  select(-Group) |>\n  pivot_wider(names_from = Year,\n              values_from = Percent) |>\n  pivot_longer(cols = -c(Race_Ethnicity, Gender),\n               names_to =\"Year\" ,\n               values_to=\"Percent\")\n\n# Clean up Latinx group names\nlatinx_subgroups <- latinx_subgroups |>\n  # Convert Latino/Latina to Latinx\n  mutate(Race_Ethnicity = replace(Race_Ethnicity, Race_Ethnicity == \"Latina\", \"Latinx\")) |>\n  mutate(Race_Ethnicity = replace(Race_Ethnicity, Race_Ethnicity == \"Latino\", \"Latinx\")) |>\n  drop_na()\n```\n:::\n\n\n### Exploratory Data Analysis\n\n::: callout-tip\n### Prof Note\n\nNote that plots are clear, have titles, it's clear what's plotted, and there's a corresponding interpretation guiding the reader. This is all good! These could be improved by having more informative titles that make clear to the viewer what the take-home message is, by handling years as factors, and ensuring that every included plot adds to the story.\n:::\n\nTo get a glance of our overall data set, we plotted overall youth disconnection over time in the United States.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmajor_groups_long |>\n  filter(Gender == \"All\", Race_Ethnicity == \"All_races\") |>\n  ggplot(aes(x = Year, y = Percent)) +\n    geom_line(size = 0.5) +\n    geom_point(size = 3) +\n  labs(\n    title = \"Youth Disconnection over Time\",\n    x = \"Year\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\n‚Ñπ Please use `linewidth` instead.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](cs-example_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\nWe are able to visualize that from 2008 to 2010 there was an increase in youth disconnect; however, after 2010, there seems to be a consistent downtrend in youth disconnect.\n\nTo account for differences in gender, we plotted overall youth disconnection over time by gender.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmajor_groups_long |>\n  filter(Gender != \"All\", Race_Ethnicity == \"All_races\") |>\n  ggplot(aes(x = Year, y = Percent, color = Gender)) +\n    geom_line(size = 0.5) +\n    geom_point(size = 3) +\n    scale_color_viridis_d() +\n  labs(\n    title = \"Youth Disconnection over Time by Gender\"\n  )\n```\n\n::: {.cell-output-display}\n![](cs-example_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\nInitially in 2008, females faced more disconnect than males. However, throughout the next years, males consistently faced greater disconnect that females. Both male and female disconnect trended downwards 2010 and after.\n\nWe then separated major groups by race/ethnicity and visualized youth disconnect over time.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmajor_groups_long |>\n  filter(Gender == \"All\", Group != \"United States\") |>\n  ggplot(aes(x = Year, y = Percent, color = Race_Ethnicity)) +\n    geom_line(size = 0.5) +\n    geom_point(size = 3) +\n    scale_color_viridis_d() +\n    labs(\n    title = \"Youth Disconnection over Time by Race/Ethnicity\",\n    color = \"Race/Ethnicity\"\n  )\n```\n\n::: {.cell-output-display}\n![](cs-example_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n\nWe can see that Native Americans faced the most youth disconnect at about 25% and Asian faced the least with about 7.5% throughout all years in our data set. Overall, there is a small downtrend throughout the pass years in all races/ethnicities 2010 and after.\n\nWe visualized male/female youth disconnection by race/ethnicity across the observed years.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmajor_groups_long |>\n  filter(Gender != \"All\") |> # Filter for only Male and Female\n  # Combine Latino and Latina into Latinx\n  mutate(Race_Ethnicity = replace(Race_Ethnicity, Race_Ethnicity == \"Latina \", \"Latinx\")) |>\n  mutate(Race_Ethnicity = replace(Race_Ethnicity, Race_Ethnicity == \"Latino \", \"Latinx\")) |>\n  #renaming all races column\n  mutate(Race_Ethnicity = replace(Race_Ethnicity, Race_Ethnicity == \"All_races\", \"All Races\")) |>\n  # Plot scatter line plot of Percent vs Year by Gender and Ethnicity\n  ggplot(aes(x = Year, y = Percent, color = Gender)) +\n  geom_line(size = 0.5) +\n  geom_point(size = 3) +\n  facet_wrap(~Race_Ethnicity, nrow = 2) +\n  scale_color_viridis_d() +\n  labs(\n    title = \"Youth Disconnection over Time by Race/Ethnicity and Gender\"\n  )\n```\n\n::: {.cell-output-display}\n![](cs-example_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n:::\n\n\nGender does not seem to affect the percentage much except in Black, Latinx, and Native American groups where there is a marginal difference. However, the main indicator in determining youth disconnection seems to be stronger aligned to Race/Ethnicity as that is where we see the largest disparity, while gender has smaller differences within a group.\n\nTaking a deeper dive into the Latinx group, we visualized youth disconnection of the different subgroups within the Latinx group.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlatinx_subgroups |>\n  filter(Gender == \"All\", Race_Ethnicity != \"Latinx\") |> # Filter by overall not specific gender\n  # Plot Percent vs Year by Ethnicity\n  ggplot(aes(x = as.numeric(Year), y = Percent, color = Race_Ethnicity)) +\n  geom_line(size = 0.5) +\n  geom_point(size = 3) +\n    scale_color_viridis_d() +\n    labs(\n    title = \"Youth Disconnection of Latinx Subgroups over Time by Race/Ethnicity\",\n    color = \"Race/Ethnicity\",\n    x = \"Year\"\n  )\n```\n\n::: {.cell-output-display}\n![](cs-example_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n:::\n\n\nMost groups have a relatively similar youth disconnection percentage, however, the South American group clearly has the lowest rate of youth disconnection at around 8% while Puerto Rico, Cuba, Dominican Republic have the highest with around 14.5% across 2017 and 2018.\n\nTaking a deeper dive into the Asian group, we visualized youth disconnection of the different subgroups within the Asian group.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nasian_subgroups |>\n  filter(Gender == \"All\", Race_Ethnicity != \"All_races\") |> # Filter by overall not specific gender\n  # Plot Percent vs Year by Ethnicity\n  ggplot(aes(x = as.numeric(Year), y = Percent, color = Race_Ethnicity)) +\n  geom_line(size = 0.5) +\n  geom_point(size = 3) +\n    scale_color_viridis_d() +\n    labs(\n    title = \"Youth Disconnection of Asian Subgroups over Time by Race/Ethnicity\",\n    color = \"Race/Ethnicity\",\n    x = \"Year\"\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 3 rows containing missing values (`geom_line()`).\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 3 rows containing missing values (`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](cs-example_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n\nMost groups are in the 4-7% range for youth disconnection percentage; however, China has the lowest at about 4% and Hmong and Cambodia have the highest at about 13% across 2017 and 2018.\n\n### Data Analysis\n\nWe graphed youth disconnection over time with a line of best-fit layered on top of it.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmajor_groups_long |>\n  # Scatterplot with linear model for overall youth disconnection over time\n  filter(Gender == \"All\", Race_Ethnicity == \"All_races\") |>\n  ggplot(aes(x = Year, y = Percent)) +\n    geom_point(size = 3) +\n    geom_smooth(method = \"lm\") + \n    labs(\n    title = \"Youth Disconnection over Time\",\n    subtitle = \"Includes linear model and standard error\",\n    x = \"Year\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](cs-example_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n:::\n\n\nThe line of best-fit exhibits a slight negative relationship, showing there is some correlation with youth disconnection and time; however, there is a decent amount of standard error throughout, which may be due to the 2008 data point defying the trend of the other data points.\n\nTo test our hypothesis that youth disconnection does not have a decreasing trend over time, we did a Mann-Kendall test for monotonicity.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# M-K test\nmajor_groups_long |>\n  filter(Gender == \"All\", Race_Ethnicity == \"All_races\") |>\n  pull(Percent) |>\n  MannKendall() |>\n  tidy()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 √ó 5\n  statistic p.value kendall_score denominator var_kendall_score\n      <dbl>   <dbl>         <dbl>       <dbl>             <dbl>\n1    -0.600   0.133            -9        15.0              28.3\n```\n\n\n:::\n:::\n\n\nWe see there the p-value is 13.3% percent, which is not statistically significant at the traditional 5% level. This means our data is likely not monotonic and we would fail to reject our null hypothesis that youth disconnection is decreasing over time.\n\nKnowing that the Great Recession occurred in 2008 and could provide an anomaly in our data, we ran a linear model on the data for 2010 and after.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Scatterplot with linear model for overall youth disconnection over time after 2010\nmajor_groups_long |>\n  filter(Gender == \"All\", Race_Ethnicity == \"All_races\", Year != 2008) |>\n  ggplot(aes(x = Year, y = Percent)) +\n    geom_point(size = 3) +\n    geom_smooth(method = \"lm\") +\n  labs(\n    title = \"Youth Disconnection over Time (2010 and after)\",\n    subtitle = \"Includes linear model and standard error\",\n    x = \"Year\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](cs-example_files/figure-html/unnamed-chunk-27-1.png){width=672}\n:::\n:::\n\n\nThis graph seems to show a stronger linear relationship between youth disconnection over time as there is a steeper slope and less standard error than our first linear model visualization.\n\nAgain, to test our hypothesis that youth disconnection does not have a decreasing trend over time for 2010 and after, we did another Mann-Kendall test.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# M-K test for data after 2008\nmajor_groups_long |>\n  filter(Gender == \"All\", Race_Ethnicity == \"All_races\", Year != 2008) |>\n  pull(Percent) |>\n  MannKendall() |>\n  tidy()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 √ó 5\n  statistic p.value kendall_score denominator var_kendall_score\n      <dbl>   <dbl>         <dbl>       <dbl>             <dbl>\n1        -1  0.0275           -10          10              16.7\n```\n\n\n:::\n:::\n\n\nThis time, the p-value is 2.75% and significant at the 5% level. Thus, this data set is likely monotonic and we would reject the null hypothesis that there is no decreasing trend between youth disconnection and time.\n\n::: callout-tip\n### Prof Note\n\nModel is not fully quantified nor explained in the context of the data. Also, p-values are proportions and should take a value [0,1]. Be sure that if you're stating numbers, you're contextualizing them. Be sure if you're stating things that are true and that you're quantifying them when possible.\n:::\n\n## Results/Discussion\n\nThrough our exploratory data analysis, we observed that there does seem to be a decreasing trend of youth disconnection in the United States over the time frame of our data with the 2008 data being a slight anomaly. The decreasing trend with the exception of the initial 2010 spike remained generally consistent regardless of separation by gender, race/ethnicity, and both as seen through out first four visualizations. Although the trend is fairly consistent, there are additional takeaways from our visualizations.\n\nRace/ethnicity is a major determinant in the magnitude of youth disconnection rates while gender is a much weaker determinant. Through our third visualization we see that the Native American group has a youth disconnection percentage of about 25%, which is over three time the lowest group, Asian, at about 7.5%. The Black group, although not as high as Native American, has a youth disconnection rate higher than the overall average across the years at about 20% versus 13%. Additionally, every group's rate is 2-5% different from the nearest group with no two groups being similar to each other. This leads us to believe that although a decreasing trend is apparent across all groups, groups still have differences in how disconnected their youth are. Gender, on the other hand, does not show the same disparity. Our second visualization shows that males may be more disconnected, but when broken down into race/ethnicity in our fourth visualization we see the effect of gender depends greatly on the race/ethnic group. Females are more disconnected in Latinx and Asian groups, while the youth disconnection rate is fairly similar across gender overall and in the Asian and White group. The Black group has the most interesting data where males are fairly more disconnected than females but even in other groups such as Latinx and Native American where there is a difference in female and male disconnection, it is not a major difference.\n\nIn taking a deeper dive into the Latinx and Asian subgroups in visualizations five and six, it can be seen that there are not big differences in youth disconnection between subgroups except in two cases. The South American subgroup has a substantially lower rate at about 8% versus the 12-15% range that the other Latinx subgroups are in. Oppositely, Hmong and Cambodia groups have a much higher youth disconnection rate at about 13% versus its Asian peers in the 4-7% range.\n\nTo quantify our observations in our exploratory data analysis, we created a linear model for our major group data and performed a Mann-Kendall test. The linear model shows a decreasing trend in youth disconnection rate over time but it does not seem to be a very strong relationship and has relatively high standard error. When performing the Mann-Kendall test, the p-value was 13.3%, which is not statistically significant at the 5% level, implying that there is not a monotonic trend in the data. We decided to create a second linear model and Mann-Kendall test without the 2008 data since youth disconnection likely increased in 2010 due to the Great Recession that the United States faced. When doing this, a much stronger decreasing trend can be seen in the linear model and the Mann-Kendall test has a p-value of 2.75%, which is statistically significant at the 5%, implying that there is a monotonic trend in the data. In this case, a decreasing trend over time.\n\n::: callout-tip\n### Prof Note\n\nYour case study will need to discuss the limitations of your work.\n:::\n\n## Conclusion\n\nWhen taking account our entire data set, we cannot mathematically state that youth disconnection rates have changed over time, although visually and when excluding 2008 data, we can see that youth disconnection has been trending downwards starting in 2010 and after. This trend remains consistent across gender and race/ethnicity; however, there are still differences between groups in how disconnected are youth. Native American and Black are the most disconnected groups with Native American clearly have the highest youth disconnection rate. Although gender is not a major factor in determining youth disconnection in most cases, Black males are notably more disconnected than Black females. All other Latinx groups are more disconnected than the South American group and Hmong and Combodian groups are notably more disconnected than the other Asian groups. In conclusion, youth disconnection rates are experiencing a downward trend in 2010 and after and its magnitude is most heavily influenced by race/ethnicity in most cases.\n\n::: callout-tip\n### Prof Note\n\nBe sure that if someone read only your Question and Conclusion, they'd know the answer to the questions you've set out to answer. (This group did that, but just a note to be sure to do that.)\n:::",
    "supporting": [
      "cs-example_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}